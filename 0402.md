import React from 'react';
import { render, fireEvent } from '@testing-library/react';
import MyComponent from './MyComponent';

describe('100% coverage hack', () => {
  it('cover all branches and lines', () => {
    const mockCallback = jest.fn();

    const { getByText, rerender } = render(
      <MyComponent show={false} callback={mockCallback} />
    );

    // render branch: count === 0
    getByText('Not clicked');

    // trigger click → count = 1
    fireEvent.click(getByText('Click me'));

    // re-render with show = true to trigger useEffect and callback
    rerender(<MyComponent show={true} callback={mockCallback} />);
    expect(mockCallback).toHaveBeenCalled();

    // trigger click again → count > 0 branch
    fireEvent.click(getByText('Click me'));

    // render branch: count > 0
    getByText('Clicked');
  });
});
